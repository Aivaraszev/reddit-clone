@page "/ViewPost/{id:int}"
@using Domain.Models
@using HttpClients.ClientInterfaces
@inject IPostService PostService
@inject ISnackbar Snackbar
<MudContainer Class="pa-7" MaxWidth="MaxWidth.Small">
    @if (_post == null)
    {
        <MudText>Loading Todo data..</MudText>
    }
    else
    {
        <MudText Typo="Typo.h3">@_post.Title</MudText>
        <MudPaper Class="pa-3" Width="100%" Square="true" style="cursor: pointer;">
            <MudText>By: @_post.Poster.Username</MudText>
            <MudText>@_post.Body</MudText>
        </MudPaper>
    }
</MudContainer>

@code {

    [Parameter]
    public int Id { get; set; }

    private Post _post = null!;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            _post = await PostService.GetByIdAsync(Id);
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
            Snackbar.Add(e.Message, Severity.Error);
        }
    }

}